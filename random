dynamic_prompt_template = """
You are an AI tasked with classifying financial and business process texts. For each text, first **understand the context** and then classify it into one of the following main categories, subcategories, or assign it to "Other" if none of the categories fit. If none of the subcategories fit, assign the subcategory to "Other" under the relevant main category.

**Main Categories:**
1. **Product Capability** (e.g., ACH Direct Send, BAI Reporting, Treasury Services)
    - Subcategories: Wires, Online Access (e.g., JPM Access or Chase Connect), Lockbox, Checks, Fraud Prevention
    - Example: Deals won due to strong product offerings such as ACH Direct Send, BAI Reporting, treasury services, Wires, and online access through JPM Access or Chase Connect. Clients found products tailored to their needs and easy to integrate with their business processes.

2. **Client-Specific Solutions** (e.g., Customization for new account setups, Specific Currency Accounts, Manual Processing Improvements)
    - Subcategories: New Account Setup, Specific Client Currency Accounts, Customization, Manual Processing Improvements
    - Example: Winning deals due to responsiveness to client-specific needs such as customizing accounts, connectivity (H2H), or improving operational efficiencies (e.g., manual check processing improvements).

3. **Client Onboarding and Implementation** (e.g., New Client Setup, Smooth Service Implementation)
    - Subcategories: New Client Setup, Onboarding Efficiency, Smooth Service Implementation
    - Example: Deals won due to efficient onboarding and smooth service delivery. Use this category when the focus is on setting up new client relationships or ensuring smooth transitions into service.

4. **Market Disruption** (e.g., Stability in times of market volatility)
    - Subcategories: Market Volatility, Stability Solutions
    - Example: Clients switching from competitors during disruptions or seeking services that provide financial stability.

5. **Relationship and Wallet Share** (e.g., Expanding existing client relationships, increasing wallet share)
    - Subcategories: Expanding Services, Cross-Sell, Client Retention
    - Example: Strengthening relationships to win additional services from clients.

6. **Geographical Expansion** (e.g., Opening new accounts in international regions)
    - Subcategories: New International Accounts, Regional Expansion
    - Example: Deals involving opening accounts in new regions or entities (e.g., opening new USD accounts in Mexico or international expansions).

7. **Competitor Comparison** (e.g., Highlighting advantages over competitors in offerings or pricing)
    - Subcategories: Pricing Advantages, Product Superiority, Service Offering Superiority
    - Example: Winning deals by emphasizing advantages over competitors, such as better service offerings or superior pricing strategies.

8. **Client Relationship Changes** (e.g., personnel leaving, client transfers)
    - Subcategories: Personnel Transitions, Client Transfers, Relationship Reset
    - Example: Cases where deals are influenced by key personnel leaving (e.g., "Paul Miner left the company"), client transfers, or resetting client relationships due to organizational changes. Use this category when there is a transition in client relationships or decision-makers.

9. **Other**: If the text does not match any of the above categories, classify it as "Other" and assign a relevant sub-category or "Other" if no sub-category fits.

For each text, provide a high-level category, a relevant sub-category with specifics, and a 2-3 word process description based on the context.

Text: "{input_text}"

### Response Format:
1. Main Category: [Product Capability / Client-Specific Solutions / Client Onboarding and Implementation / Market Disruption / Relationship and Wallet Share / Geographical Expansion / Competitor Comparison / Client Relationship Changes / Other]
2. Sub-Category: [Assigned Sub-Category with details (if applicable) or "Other"]
3. Specific Process: [2-3 word description]
"""

# Optional Notes:
# - When handling texts that mention names or personnel changes (e.g., "Paul Miner left the company"), categorize them under "Client Relationship Changes" and assign the appropriate sub-category.
# - Ensure cases involving customized solutions for clients (e.g., manual check processing improvements) fall under "Client-Specific Solutions" instead of Product Capability.
# - For smooth onboarding cases or efficient service implementations, classify under "Client Onboarding and Implementation".
